[
  {
    "Id": "572605",
    "ThreadId": "247701",
    "Html": "\r\n<p>Hi All,</p>\r\n<p>I am new to MVC and web programming in general. So I hope someone can help me out.</p>\r\n<p>Whenever I try to delete an item from the shopping cart, an Open File Dialog displays indicating an unknown file type. I have added application/json mime type to IIS 7. I've tried several ideas I've found in the discussions here but nothing seems to work.\r\n All of the relevant code is below. Can someone help? this has me stopped.</p>\r\n<p>ShoppingCartViewModel.Index.cshtml</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>@model MvcMusicStore.ViewModels.ShoppingCartViewModel\r\n@{\r\n\tViewBag.Title = &quot;Shopping Cart&quot;;\r\n}\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">script</span> <span style=\"color:red\">src</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;../../Scripts/jquery-1.4.4.min.js&quot;</span> <span style=\"color:red\">type</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;text/javascript&quot;</span><span style=\"color:blue\">&gt;</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">script</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">script</span> <span style=\"color:red\">src</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;&lt;%: Url.Content('~/Scripts/jquery.unobtrusive-ajax.min.js') %&gt;&quot;</span> <span style=\"color:red\">type</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;text/javascript&quot;</span><span style=\"color:blue\">&gt;</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">script</span><span style=\"color:blue\">&gt;</span>\r\n\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">script</span> <span style=\"color:red\">type</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;text/javascript&quot;</span><span style=\"color:blue\">&gt;</span>\r\n\t$(<span style=\"color:blue\">function</span> () {\r\n\t\t<span style=\"color:green\">// Document.ready -&gt; link up remove event handler</span>\r\n\t\t$(<span style=\"color:#a31515\">&quot;.RemoveLink&quot;</span>).click(<span style=\"color:blue\">function</span> () {\r\n\t\t\t<span style=\"color:green\">// Get the id from the link</span>\r\n\t\t\t<span style=\"color:blue\">var</span> recordToDelete = $(<span style=\"color:blue\">this</span>).attr(<span style=\"color:#a31515\">&quot;data-id&quot;</span>);\r\n\r\n\t\t\t<span style=\"color:blue\">if</span> (recordToDelete != <span style=\"color:#a31515\">''</span>) {\r\n\r\n\t\t\t\t<span style=\"color:green\">// Perform the ajax post</span>\r\n\t\t\t\t$.post(<span style=\"color:#a31515\">&quot;/ShoppingCart/RemoveFromCart&quot;</span>, { <span style=\"color:#a31515\">&quot;id&quot;</span>: recordToDelete },\r\n                    <span style=\"color:blue\">function</span> (data) {\r\n                    \t<span style=\"color:green\">// Successful requests get here</span>\r\n                    \t<span style=\"color:green\">// Update the page elements</span>\r\n                    \t<span style=\"color:blue\">if</span> (data.ItemCount == 0) {\r\n                    \t\t$(<span style=\"color:#a31515\">'#row-'</span> &#43; data.DeleteId).fadeOut(<span style=\"color:#a31515\">'slow'</span>);\r\n                    \t} <span style=\"color:blue\">else</span> {\r\n                    \t\t$(<span style=\"color:#a31515\">'#item-count-'</span> &#43; data.DeleteId).text(data.ItemCount);\r\n                    \t}\r\n\r\n                    \t$(<span style=\"color:#a31515\">'#cart-total'</span>).text(data.CartTotal);\r\n                    \t$(<span style=\"color:#a31515\">'#update-message'</span>).text(data.Message);\r\n                    \t$(<span style=\"color:#a31515\">'#cart-status'</span>).text(<span style=\"color:#a31515\">'Cart ('</span> &#43; data.CartCount &#43; <span style=\"color:#a31515\">')'</span>);\r\n                    });\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t<span style=\"color:blue\">function</span> handleUpdate() {\r\n        <span style=\"color:green\">// Load and deserialize the returned JSON data</span>\r\n        <span style=\"color:blue\">var</span> json = context.get_data();\r\n        <span style=\"color:blue\">var</span> data = Sys.Serialization.JavaScriptSerializer.deserialize(json);\r\n\r\n        <span style=\"color:green\">// Update the page elements</span>\r\n        <span style=\"color:blue\">if</span> (data.ItemCount == 0) \r\n\t\t{\r\n            $(<span style=\"color:#a31515\">'#row-'</span> &#43; data.DeleteId).fadeOut(<span style=\"color:#a31515\">'slow'</span>);\r\n        } <span style=\"color:blue\">else</span> \r\n\t\t{\r\n            $(<span style=\"color:#a31515\">'#item-count-'</span> &#43; data.DeleteId).text(data.ItemCount);\r\n        }\r\n\r\n        $(<span style=\"color:#a31515\">'#cart-total'</span>).text(data.CartTotal);\r\n        $(<span style=\"color:#a31515\">'#update-message'</span>).text(data.Message);\r\n        $(<span style=\"color:#a31515\">'#cart-status'</span>).text(<span style=\"color:#a31515\">'Cart ('</span> &#43; data.CartCount &#43; <span style=\"color:#a31515\">')'</span>);\r\n    }\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">script</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">h3</span><span style=\"color:blue\">&gt;</span>\r\n\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">em</span><span style=\"color:blue\">&gt;</span>Review<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">em</span><span style=\"color:blue\">&gt;</span> your cart:<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">h3</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span>\r\n\t@Html.ActionLink(&quot;Create New&quot;, &quot;Create&quot;)\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span>\r\n\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">p</span> <span style=\"color:red\">class</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;button&quot;</span><span style=\"color:blue\">&gt;</span>\r\n\t\t@Html.ActionLink(&quot;Checkout &gt;&gt;&quot;, &quot;AddressAndPayment&quot;, &quot;Checkout&quot;)\r\n\t<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span>\r\n\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">div</span> <span style=\"color:red\">id</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;update-message&quot;</span><span style=\"color:blue\">&gt;</span>\r\n\t<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">div</span><span style=\"color:blue\">&gt;</span>\r\n\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">table</span><span style=\"color:blue\">&gt;</span>\r\n\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">tr</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">th</span><span style=\"color:blue\">&gt;</span>Album Name<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">th</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">th</span><span style=\"color:blue\">&gt;</span>Price (each)<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">th</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">th</span><span style=\"color:blue\">&gt;</span>Quantity<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">th</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">th</span><span style=\"color:blue\">&gt;</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">th</span><span style=\"color:blue\">&gt;</span>\r\n\t\t<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">tr</span><span style=\"color:blue\">&gt;</span>\r\n\t@foreach (var item in Model.CartItems)\r\n\t{\r\n\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">tr</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t\t@Html.ActionLink(item.Album.Title, &quot;Details&quot;, &quot;Store&quot;, new { id = item.AlbumId }, null)\r\n\t\t\t<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t\t@item.Album.Price\r\n\t\t\t<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">td</span> <span style=\"color:red\">id</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;item-count-@item.RecordId&quot;</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t\t@item.Count\r\n\t\t\t<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t\t\t@*<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">a</span> <span style=\"color:red\">href</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;#&quot;</span> <span style=\"color:red\">class</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;RemoveLink&quot;</span> <span style=\"color:red\">id</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;@item.RecordId&quot;</span><span style=\"color:blue\">&gt;</span>Remove from cart<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">a</span><span style=\"color:blue\">&gt;</span>*@\r\n\t\t\t\t@Ajax.ActionLink(&quot;Remove from Cart&quot;, &quot;RemoveFromCart&quot;, new { id = item.RecordId }, new AjaxOptions { OnSuccess = &quot;handleUpdate&quot;, HttpMethod=&quot;Post&quot; })\r\n\t\t\t<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">tr</span><span style=\"color:blue\">&gt;</span>\r\n\t}\r\n\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">tr</span><span style=\"color:blue\">&gt;</span>\r\n\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>Total<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t\t<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">td</span> <span style=\"color:red\">id</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;cart-total&quot;</span><span style=\"color:blue\">&gt;</span>@Model.CartTotal<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">td</span><span style=\"color:blue\">&gt;</span>\r\n\t<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">tr</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">table</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p>&nbsp;Shopping Cart Controller.RemoveFromCart</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">public</span> ActionResult RemoveFromCart(<span style=\"color:blue\">int</span> id)\r\n\t\t{\r\n\t\t\tShoppingCart cart = ShoppingCart.GetCart(<span style=\"color:blue\">this</span>.HttpContext);\r\n\t\t\tAlbum albumToRemove = storeDB.Carts.SingleOrDefault(a =&gt; a.RecordId == id).Album;\r\n\t\t\t<span style=\"color:blue\">int</span> itemCount = cart.RemoveFromCart(albumToRemove.AlbumId);\r\n\t\t\tShoppingCartRemoveViewModel shoppingCartRemoveViewModel = <span style=\"color:blue\">new</span> ShoppingCartRemoveViewModel\r\n\t\t\t{\r\n\t\t\t\tMessage = Server.HtmlEncode(albumToRemove.Title &#43; <span style=\"color:#a31515\">&quot; has been removed from your cart&quot;</span>),\r\n\t\t\t\tCartTotal = cart.GetTotal(),\r\n\t\t\t\tCartCount = cart.GetCount(),\r\n\t\t\t\tItemCount = itemCount,\r\n\t\t\t\tDeleteId = id\r\n\t\t\t};\r\n\t\t\t<span style=\"color:blue\">return</span> Json(shoppingCartRemoveViewModel, JsonRequestBehavior.AllowGet);\r\n\t\t}\r\n</pre>\r\n</div>\r\n",
    "PostedDate": "2011-02-26T11:22:01.797-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "572615",
    "ThreadId": "247701",
    "Html": "<p>Is there a reason you're running this in IIS as opposed to using the built-in web development server? Just trying to understand the scenario.</p>",
    "PostedDate": "2011-02-26T11:59:15.563-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "572617",
    "ThreadId": "247701",
    "Html": "<p>actually I am running this in the Web Dev Server. Adding the Mime type to IIS was a possible \"solution\" that I ran across online. I didn't think about the fact that it was not actually running in IIS.</p>",
    "PostedDate": "2011-02-26T12:02:43.417-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]
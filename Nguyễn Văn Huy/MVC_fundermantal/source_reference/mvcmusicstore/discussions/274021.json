[
  {
    "Id": "677302",
    "ThreadId": "274021",
    "Html": "<p>I have finished this tutorial. Although it gives more explanations<br />than book based on the same example project <br />(\"PROFESSIONAL ASP.NET MVC 3\"),<br />but still some chapters lack explanations. From chapter 8 to the end<br />author doesn't give detailed explanation of written code, <br />on the other hand first chapters spend to much time on simple things.</p>\n<p>I have found two bugs in MVC Music Store project.</p>\n<p>First bug.<br />Edit action in StoreManagerController doesn't work at all <br />because:<br />1.<br />[Bind(Exclude = <span style=\"color: #a31515;\">\"AlbumId\"</span>)]<br /><span style=\"color: blue;\">public</span> <span style=\"color: blue;\">class</span> Album<br /><br />2. Edit.cshtml doesn't post AlbumId value,<br />i.e. it is always equal to 0.<br />To correct this add to Edit.cshtml</p>\n<div style=\"background-color: white; color: black;\">\n<pre>@Html.HiddenFor(model =&gt; model.AlbumId)\r\n</pre>\n</div>\n<p>below &lt;legend&gt;Album&lt;/legend&gt; line <br />and remove [Bind(Exclude = <span style=\"color: #a31515;\">\"AlbumId\"</span>)]</p>\n<p>&nbsp;</p>\n<p>Second bug.<br />GetTopSellingAlbums method in HomeController doesn't work correctly,<br />e.g. if user A buys 1 album titled \"Tiltle1\" and buys 10 copies<br />of album titled \"Best Seller\", and user B buys 1 album titled \"Tiltle1\", <br />then GetTopSellingAlbums method will give incorrect result <br />saying that more copies of album \"Tiltle1\" were sold than album <br />\"Best Seller\".<br />Here is corrected version of this method:&nbsp;&nbsp;&nbsp;</p>\n<div style=\"background-color: white; color: black;\">\n<pre><span style=\"color: blue;\">private</span> List&lt;Album&gt; GetTopSellingAlbums(<span style=\"color: blue;\">int</span> count)\r\n{\r\n    <span style=\"color: blue;\">return</span> db.Albums\r\n        .OrderByDescending( a =&gt; (<span style=\"color: blue;\">from</span> od <span style=\"color: blue;\">in</span> a.OrderDetails\r\n                                  <span style=\"color: blue;\">select</span> od.Quantity).Sum() )\r\n        .Take(count)\r\n        .ToList();\r\n}\r\n\r\n</pre>\n</div>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "PostedDate": "2011-09-27T11:42:03.147-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]
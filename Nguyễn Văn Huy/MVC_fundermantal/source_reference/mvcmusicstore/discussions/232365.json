[
  {
    "Id": "512735",
    "ThreadId": "232365",
    "Html": "\r\n<p>the tutorial is really helpful however there are some problems I've encountered using VS 2008. The .single method throws an exception so i had to use .first.</p>\r\n<p>Another thing that I have found is that Genre and Artist doesn't get updated whenever I click save when editing and it throws null exception when creating. It seems that the object album doesn't get updated when the event edit and create is trigger. I don't\r\n know if this is vs 2008 specific problem.&nbsp;</p>\r\n<p>Here's my controller code for edit and create</p>\r\n<p>&nbsp;</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>      <span style=\"color:green\">//</span>\r\n        <span style=\"color:green\">// POST: /StoreManager/Create</span>\r\n\r\n        [HttpPost]\r\n        <span style=\"color:blue\">public</span> ActionResult Create(Album album)\r\n        {\r\n            <span style=\"color:blue\">try</span>\r\n            {\r\n                <span style=\"color:green\">// TODO: Add insert logic here</span>\r\n                storeDB.AddToAlbum(album);\r\n                storeDB.SaveChanges();\r\n\r\n                <span style=\"color:blue\">return</span> Redirect(<span style=\"color:#a31515\">&quot;/&quot;</span>);\r\n            }\r\n            <span style=\"color:blue\">catch</span>\r\n            {\r\n                <span style=\"color:green\">// invalid - redisplay with errors</span>\r\n\r\n                <span style=\"color:blue\">var</span> viewModel = <span style=\"color:blue\">new</span> StoreManagerViewModel\r\n                {\r\n                    Album = album,\r\n                    Genres = storeDB.Genre.ToList(),\r\n                    Artists = storeDB.Artist.ToList()\r\n                };\r\n\r\n                <span style=\"color:blue\">return</span> View(viewModel);\r\n            }\r\n        }\r\n\r\n\r\n        <span style=\"color:green\">//</span>\r\n        <span style=\"color:green\">// POST: /StoreManager/Edit/5</span>\r\n\r\n        [HttpPost]\r\n        <span style=\"color:blue\">public</span> ActionResult Edit(<span style=\"color:blue\">int</span> id, FormCollection collection)\r\n        {\r\n            <span style=\"color:blue\">var</span> album = storeDB.Album\r\n                .First(a =&gt; a.AlbumId == id);\r\n        \r\n            <span style=\"color:blue\">try</span>\r\n            {\r\n                <span style=\"color:green\">// save album</span>\r\n\r\n                UpdateModel(album, <span style=\"color:#a31515\">&quot;Album&quot;</span>);                               \r\n                storeDB.SaveChanges();\r\n\r\n                <span style=\"color:blue\">return</span> RedirectToAction(<span style=\"color:#a31515\">&quot;Index&quot;</span>);\r\n            }\r\n            <span style=\"color:blue\">catch</span>\r\n            {\r\n                <span style=\"color:blue\">var</span> viewModel = <span style=\"color:blue\">new</span> StoreManagerViewModel\r\n                {\r\n                    Album = album,\r\n                    Genres = storeDB.Genre.ToList(),\r\n                    Artists = storeDB.Artist.ToList()\r\n                };\r\n\r\n                <span style=\"color:blue\">return</span> View(viewModel);\r\n            }\r\n        }\r\n\r\n</pre>\r\n<pre>And here's my ascx code for the dropdown list of genres and artist</pre>\r\n<pre><div style=\"color:black; background-color:white\"><pre>   \r\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">div</span> <span style=\"color:red\">class</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;editor-field&quot;</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"background-color:yellow\">&lt;%=</span> Model.Artist == null ? Html.DropDownList(&quot;ArtistId&quot;, new SelectList(ViewData[&quot;Artists&quot;] as IEnumerable,\r\n                &quot;ArtistId&quot;, &quot;Name&quot;)) \r\n                        : Html.DropDownList(&quot;ArtistId&quot;, new SelectList(ViewData[&quot;Artists&quot;] as IEnumerable,\r\n                &quot;ArtistId&quot;, &quot;Name&quot;, Model.Artist.ArtistId))<span style=\"background-color:yellow\">%&gt;</span>\r\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">div</span><span style=\"color:blue\">&gt;</span>\r\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">div</span> <span style=\"color:red\">class</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;editor-label&quot;</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"background-color:yellow\">&lt;%=</span> Html.LabelFor(model =&gt; model.Genre) <span style=\"background-color:yellow\">%&gt;</span>\r\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">div</span><span style=\"color:blue\">&gt;</span>\r\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">div</span> <span style=\"color:red\">class</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;editor-field&quot;</span><span style=\"color:blue\">&gt;</span>\r\n        <span style=\"background-color:yellow\">&lt;%=</span> Model.Genre == null ? Html.DropDownList(&quot;GenreId&quot;, new SelectList(ViewData[&quot;Genres&quot;] as IEnumerable,\r\n                &quot;GenreId&quot;, &quot;Name&quot;))\r\n                        : Html.DropDownList(&quot;GenreId&quot;, new SelectList(ViewData[&quot;Genres&quot;] as IEnumerable,\r\n                &quot;GenreId&quot;, &quot;Name&quot;, Model.Genre.GenreId))<span style=\"background-color:yellow\">%&gt;</span>\r\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">div</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<br></pre>\r\n<pre>I hope someone can help me with this. I am really stuck on this module.</pre>\r\n</div>\r\n<p></p>\r\n",
    "PostedDate": "2010-10-26T07:27:14.22-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "517293",
    "ThreadId": "232365",
    "Html": "\r\n<p>Your&nbsp;Album.ascx code doesn't match what's on p.81 of the tutorial (v1.0):</p>\r\n<pre></pre>\r\n<pre><span style=\"background-color:yellow\">&lt;%</span><span style=\"color:blue\">@</span> <span style=\"color:#a31515\">Control</span> <span style=\"color:red\">Language</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;C#&quot;</span> <span style=\"color:red\">Inherits</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;System.Web.Mvc.ViewUserControl&lt;MvcMusicStore.Models.Album&gt;&quot;</span> <span style=\"background-color:yellow\">%&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.LabelFor(model =&gt; model.Title)<span style=\"background-color:yellow\">%&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.TextBoxFor(model =&gt; model.Title)<span style=\"background-color:yellow\">%&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.ValidationMessageFor(model =&gt; model.Title)<span style=\"background-color:yellow\">%&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.LabelFor(model =&gt; model.Price)<span style=\"background-color:yellow\">%&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.TextBoxFor(model =&gt; model.Price)<span style=\"background-color:yellow\">%&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.ValidationMessageFor(model =&gt; model.Price)<span style=\"background-color:yellow\">%&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.LabelFor(model =&gt; model.AlbumArtUrl)<span style=\"background-color:yellow\">%&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.TextBoxFor(model =&gt; model.AlbumArtUrl)<span style=\"background-color:yellow\">%&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.ValidationMessageFor(model =&gt; model.AlbumArtUrl)<span style=\"background-color:yellow\">%&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.LabelFor(model =&gt; model.Artist)<span style=\"background-color:yellow\">%&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.DropDownList(&quot;ArtistId&quot;, new SelectList(ViewData[&quot;Artists&quot;] as IEnumerable, &quot;ArtistId&quot;, &quot;Name&quot;, Model.ArtistId))<span style=\"background-color:yellow\">%&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.LabelFor(model =&gt; model.Genre)<span style=\"background-color:yellow\">%&gt;</span> <span style=\"background-color:yellow\">&lt;%</span>: Html.DropDownList(&quot;GenreId&quot;, new SelectList(ViewData[&quot;Genres&quot;] as IEnumerable, &quot;GenreId&quot;, &quot;Name&quot;, Model.GenreId))<span style=\"background-color:yellow\">%&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">p</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n<p>&nbsp;What page of the tutorial are you on?</p>\r\n",
    "PostedDate": "2010-11-04T12:59:31.47-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "520408",
    "ThreadId": "232365",
    "Html": "\r\n<p>I'm facing the same prob. Still can't get through, even when i directly copied the source codes from the pdf.</p>\r\n<p>Please take a look. (I did changed the MvcMusicStore to MvcMusicApp just to compare both)</p>\r\n<p>&nbsp;</p>\r\n<p>// Album.ascx //</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>&lt;%@ Control Language=<span style=\"color:#a31515\">&quot;C#&quot;</span> Inherits=<span style=\"color:#a31515\">&quot;System.Web.Mvc.ViewUserControl&lt;MvcMusicApp.Models.Album&gt;&quot;</span> %&gt;\r\n&lt;p&gt; &lt;%: Html.LabelFor(model =&gt; model.Title)%&gt;\r\n &lt;%: Html.TextBoxFor(model =&gt; model.Title)%&gt; \r\n &lt;%: Html.ValidationMessageFor(model =&gt; model.Title)%&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt; &lt;%: Html.LabelFor(model =&gt; model.Price)%&gt; \r\n&lt;%: Html.TextBoxFor(model =&gt; model.Price)%&gt; \r\n&lt;%: Html.ValidationMessageFor(model =&gt; model.Price)%&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt; &lt;%: Html.LabelFor(model =&gt; model.AlbumArtUrl)%&gt; \r\n&lt;%: Html.TextBoxFor(model =&gt; model.AlbumArtUrl)%&gt; \r\n&lt;%: Html.ValidationMessageFor(model =&gt; model.AlbumArtUrl)%&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt; &lt;%: Html.LabelFor(model =&gt; model.Artist)%&gt; \r\n&lt;%: Html.DropDownList(<span style=\"color:#a31515\">&quot;ArtistId&quot;</span>, \r\n    <span style=\"color:blue\">new</span> SelectList(ViewData[<span style=\"color:#a31515\">&quot;Artists&quot;</span>] <span style=\"color:blue\">as</span> IEnumerable, <span style=\"color:#a31515\">&quot;ArtistId&quot;</span>, <span style=\"color:#a31515\">&quot;Name&quot;</span>, Model.ArtistId))%&gt;\r\n&lt;/p&gt;\r\n&lt;p&gt; &lt;%: Html.LabelFor(model =&gt; model.Genre)%&gt; \r\n&lt;%: Html.DropDownList(<span style=\"color:#a31515\">&quot;GenreId&quot;</span>, \r\n    <span style=\"color:blue\">new</span> SelectList(ViewData[<span style=\"color:#a31515\">&quot;Genres&quot;</span>] <span style=\"color:blue\">as</span> IEnumerable, <span style=\"color:#a31515\">&quot;GenreId&quot;</span>, <span style=\"color:#a31515\">&quot;Name&quot;</span>, Model.GenreId))%&gt;\r\n&lt;/p&gt;\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>&nbsp;</p>\r\n<p>// Edit.aspx //</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>&lt;%@ Page Language=<span style=\"color:#a31515\">&quot;C#&quot;</span> MasterPageFile=<span style=\"color:#a31515\">&quot;~/Views/Shared/Site.Master&quot;</span> \r\nInherits=<span style=\"color:#a31515\">&quot;System.Web.Mvc.ViewPage&lt;MvcMusicApp.View_Models.StoreManagerViewModel&gt;&quot;</span> %&gt;\r\n\r\n&lt;asp:Content ID=<span style=\"color:#a31515\">&quot;Content1&quot;</span> ContentPlaceHolderID=<span style=\"color:#a31515\">&quot;TitleContent&quot;</span> runat=<span style=\"color:#a31515\">&quot;server&quot;</span>&gt; \r\nEdit - &lt;%: Model.Album.Title %&gt;\r\n&lt;/asp:Content&gt;\r\n\r\n&lt;asp:Content ID=<span style=\"color:#a31515\">&quot;Content2&quot;</span> ContentPlaceHolderID=<span style=\"color:#a31515\">&quot;MainContent&quot;</span> runat=<span style=\"color:#a31515\">&quot;server&quot;</span>&gt;\r\n&lt;h2&gt;Edit Album&lt;/h2&gt;\r\n&lt;% <span style=\"color:blue\">using</span> (Html.BeginForm()) {%&gt; &lt;%: Html.ValidationSummary(<span style=\"color:blue\">true</span>) %&gt;\r\n\r\n&lt;fieldset&gt;\r\n&lt;legend&gt;Edit Album&lt;/legend&gt;\r\n &lt;%: Html.EditorFor(model =&gt; model.Album, <span style=\"color:blue\">new</span> { Artists = Model.Artists, Genres = Model.Genres}) %&gt;\r\n&lt;p&gt;\r\n&lt;input type=<span style=\"color:#a31515\">&quot;submit&quot;</span> value=<span style=\"color:#a31515\">&quot;Save&quot;</span> /&gt;\r\n&lt;/p&gt;\r\n&lt;/fieldset&gt;\r\n\r\n&lt;% } %&gt;\r\n\r\n&lt;div&gt; &lt;%: Html.ActionLink(<span style=\"color:#a31515\">&quot;Back to List&quot;</span>, <span style=\"color:#a31515\">&quot;Index&quot;</span>) %&gt;\r\n&lt;/div&gt;\r\n&lt;/asp:Content&gt;\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>&nbsp;</p>\r\n<p>//StoreManagerController.cs</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre> <span style=\"color:blue\">public</span> ActionResult Edit(<span style=\"color:blue\">int</span> id)\r\n        {\r\n            <span style=\"color:blue\">var</span> viewModel = <span style=\"color:blue\">new</span> StoreManagerViewModel\r\n            {\r\n                Album = StoreDB.Albums.Single(a =&gt; a.AlbumId == id),\r\n                Genres = StoreDB.Genres.ToList(),\r\n                Artists = StoreDB.Artists.ToList()\r\n            };\r\n            <span style=\"color:blue\">return</span> View(viewModel);\r\n        }\r\n\r\n        <span style=\"color:green\">//</span>\r\n        <span style=\"color:green\">// POST: /StoreManager/Edit/5</span>\r\n\r\n        [HttpPost]\r\n        <span style=\"color:blue\">public</span> ActionResult Edit(<span style=\"color:blue\">int</span> id, FormCollection formValues)\r\n        {\r\n            <span style=\"color:blue\">var</span> album = StoreDB.Albums.Single(a =&gt; a.AlbumId == id);\r\n            <span style=\"color:blue\">try</span>\r\n            {\r\n                <span style=\"color:green\">//Save Album</span>\r\n                UpdateModel(album, <span style=\"color:#a31515\">&quot;Album&quot;</span>);\r\n                StoreDB.SaveChanges();\r\n                <span style=\"color:blue\">return</span> RedirectToAction(<span style=\"color:#a31515\">&quot;Index&quot;</span>);\r\n            }\r\n            <span style=\"color:blue\">catch</span>\r\n            {\r\n                <span style=\"color:green\">//Error occurred ï¿½ so redisplay the form</span>\r\n                <span style=\"color:blue\">var</span> viewModel = <span style=\"color:blue\">new</span> StoreManagerViewModel\r\n                {\r\n                    Album = album,\r\n                    Genres = StoreDB.Genres.ToList(),\r\n                    Artists = StoreDB.Artists.ToList()\r\n                };\r\n                <span style=\"color:blue\">return</span> View(viewModel);\r\n            }\r\n        }\r\n\r\n</pre>\r\n<pre><br></pre>\r\n</div>\r\n<p></p>\r\n",
    "PostedDate": "2010-11-11T00:57:55.543-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "520417",
    "ThreadId": "232365",
    "Html": "\r\n<p>Oh, btw. It's still showing numbers rather than names. Also, no dropdowns. And no errors also~</p>\r\n",
    "PostedDate": "2010-11-11T01:13:14.15-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "527575",
    "ThreadId": "232365",
    "Html": "\r\n<p>I think this is the copy of the MVCMusicStore.mdf.&nbsp; In the tutorial ArtistID and GenreID&nbsp; are access as a member of the Album table like album.GenreID&nbsp; album.ArtistID. If you take a look at the OP supplied code.\r\n<br>\r\nhe has to go album.Artist.ArtistID&nbsp; album.Genre.GenreID&nbsp; and the problem that occurs is on the</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<pre>try\r\n            {\r\n                // save album\r\n\r\n                UpdateModel(album, &quot;Album&quot;);                               \r\n                storeDB.SaveChanges();\r\n\r\n                return RedirectToAction(&quot;Index&quot;);\r\n            }\r\n</pre>\r\n<p>&nbsp;</p>\r\n<p>after the UpdateModel(album, &quot;Album&quot;);&nbsp; the album collection Artist and Genre is null.&nbsp; Now i think i have found a fix for ease of use.&nbsp; I think you download the Assest only like i did originally. If you download the complete Mvcmusicstore-v1.0,</p>\r\n<p>browse to the folder \\\\MvcMusicStore-v1.0\\MvcMusicStore-Completed\\MvcMusicStore\\App_Data&nbsp; and take the DB from that folder and add it to your project instead.&nbsp;</p>\r\n<p>I have done this but now i seem to have a new problem. Inspecting this &quot;New&quot; DB the tables are correct in that album.ArtistID is now a vaild call. but in my project&nbsp; the DB association seems to still be with the old mvcmusicstore.mdf</p>\r\n<p>EDIT:<br>\r\nI have deleted my storeDB.edmx and remade the DB connection but its still the same cannot access album.ArtistID album.GenreID directly.&nbsp; I am not sure if this is the reason why artist and genre are not save i just no the values return null after the UpdateModel\r\n from the form data.</p>\r\n",
    "PostedDate": "2010-11-26T19:37:02.007-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "567504",
    "ThreadId": "232365",
    "Html": "<p>im havin that exact problem i hope someone could help us on this one</p>",
    "PostedDate": "2011-02-16T16:11:18.847-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "616130",
    "ThreadId": "232365",
    "Html": "<p>Does anyone have a solution with this problem?</p>\r\n<p>The problem here is that the Thread Starter uses EF3.5 (VS2008 not 2010) that, unlike EF4.0, does not have the option to include foreign keys as fields (ArtistId and GenreId will not be added as Property of the Album Entity).</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\"></span><span style=\"background-color: yellow;\">&lt;%</span>: Html.DropDownList(<span style=\"color: #a31515;\">\"ArtistId\"</span>, <span style=\"color: blue;\">new</span> SelectList(ViewData[<span style=\"color: #a31515;\">\"Artists\"</span>] <span style=\"color: blue;\">as</span> IEnumerable, <span style=\"color: #a31515;\">\"ArtistId\"</span>, <span style=\"color: #a31515;\">\"Name\"</span>, <span style=\"text-decoration: underline;\"><strong>Model.ArtistId</strong></span>))<span style=\"background-color: yellow;\">%&gt;</span>\r\n<span style=\"color: blue;\"></span><span style=\"background-color: yellow;\">&lt;%</span>: Html.DropDownList(<span style=\"color: #a31515;\">\"GenreId\"</span>, <span style=\"color: blue;\">new</span> SelectList(ViewData[<span style=\"color: #a31515;\">\"Genres\"</span>] <span style=\"color: blue;\">as</span> IEnumerable, <span style=\"color: #a31515;\">\"GenreId\"</span>, <span style=\"color: #a31515;\">\"Name\"</span>, <span style=\"text-decoration: underline;\">Model.GenreId</span>))<span style=\"background-color: yellow;\">%&gt;</span>\r\n\r\n</pre>\r\n</div>\r\n</p>\r\n<p>Model.ArtistId and Model.GenreId would not be valid since they are not properties of the Album object.</p>\r\n<p>The process somehow fails to assign values for Genre and Artist property of the Album object based on the selected value on the DropDownList.</p>\r\n<p>Any thoughts?</p>",
    "PostedDate": "2011-05-20T15:55:19.58-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]
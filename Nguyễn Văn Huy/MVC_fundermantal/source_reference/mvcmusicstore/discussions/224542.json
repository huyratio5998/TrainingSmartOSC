[
  {
    "Id": "483709",
    "ThreadId": "224542",
    "Html": "<p>I have sql server 2008 Express sp1 64 bit, vs2010 Wxpress, running under Windows 7 Home Premium</p>\r\n<p>&nbsp;</p>\r\n<p>On page 34 I cannot connect to the MvcMusicStore.mdf as it errors with &quot;Access Denied&quot;. However if I create StoreDB.edmx by clicking on Modles folder and adding it there it works and the application runs.</p>\r\n<p>The problem comes when running ASP.net Configuration as when I click on Security it fails because it cannot run the user instance. I am sure it is a permissions thing as I can connect to the database with from vs2010 but not using the .mdf file.</p>\r\n<p>My user login is an administration account and I am the dbo of the databases but cannot work out what is wrong. I have been searching the internet for a solution for days and tried all sorts of things but no joy.</p>\r\n<p>&nbsp;</p>\r\n<p>Many thanks for your help in advance</p>\r\n<p>Chris</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-08-23T11:05:35.283-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "483716",
    "ThreadId": "224542",
    "Html": "<p>This means that the user account that SQL Server Express is running under doesn't have read/write file permissions for aspnetdb.mdf and aspnetdb_log.mdf. The user account associated with SQL Server Express is not necessarily your user account - often it's NETWORK SERVICE. Take a look at this thread on StackOverflow: <a href=\"http://stackoverflow.com/questions/1134151/user-permission-error-when-accessing-user-instance-database-from-asp-net\">http://stackoverflow.com/questions/1134151/user-permission-error-when-accessing-user-instance-database-from-asp-net</a></p>",
    "PostedDate": "2010-08-23T11:21:54.567-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "483747",
    "ThreadId": "224542",
    "Html": "<p>Many thanks for your reply. The ASPNETDB.mdf appears in App_Data and I have checked the users for that database and Mvcmusicstore and they seem to be the same with the same rights. I have checked their properties and made them the same but still cannot connect to mvcmusicstore.mdf.</p>\r\n<p>I have read through the link you sent and the links from that but could not get a solution from it</p>\r\n<p>Any further advice is welcome.</p>",
    "PostedDate": "2010-08-23T12:25:17.7-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "483752",
    "ThreadId": "224542",
    "Html": "<p>Can you verify that both the MDF and LDF files are not marked read-only? Also, can you send a stack trace and the full exception message?</p>",
    "PostedDate": "2010-08-23T12:31:40.34-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "484308",
    "ThreadId": "224542",
    "Html": "<p>The mdf &amp; ldf files are not read-only. I have discovered a lot of stuff about user instances on the internet which I will go through to see if I can get it working. The main problem is sorting out the permissions because W7 Home Premium does not allow you to manage groups. Mostly what I have read about user instances is how they are going to be dropped in the next version of sql server and they are only available in the express versions anyway.&nbsp;</p>\r\n<p>If it is not a big ask I would appreciate knowing how I could complete the sample without using user instances. It's a great exercise and I have learnt a lot so far and have almost got it working but failed on sorting out the security because I cannot configure it with the ASP.Net Configuration tool.</p>\r\n<p>Many thanks for your help</p>",
    "PostedDate": "2010-08-24T12:28:09.58-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "484345",
    "ThreadId": "224542",
    "Html": "<p>I have got it working now, including running the ASP.net configuration tool.</p>\r\n<p>I removed everything from App_Data and reconnected to the databases using the Database Explorer, the connection strings are:</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;ApplicationServices&quot; connectionString=&quot;Data Source=CHRIS-PC\\sqlexpress;Initial Catalog=C:\\USERS\\CHRIS\\DOCUMENTS\\VISUAL STUDIO 2010\\PROJECTS\\MVCMUSICSTORE\\MVCMUSICSTORE\\APP_DATA\\ASPNETDB.MDF;Integrated Security=True;&quot; providerName=&quot;System.Data.SqlClient&quot; /&gt;</p>\r\n<p><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;MvcMusicStoreEntities&quot; connectionString=&quot;metadata=res://*/Models.StoreDB.csdl|res://*/Models.StoreDB.ssdl|res://*/Models.StoreDB.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;Data Source=CHRIS-PC\\sqlexpress;Initial Catalog=MvcMusicStore;Integrated Security=True;MultipleActiveResultSets=True&amp;quot;&quot; providerName=&quot;System.Data.EntityClient&quot; /&gt;</p>\r\n<p>&nbsp;</p>\r\n<p>I just created the entity model by right-clicking on Models and adding the ADO.Entity Data Model as in the tutorial; rebuilt the application and &quot;hey presto&quot; it started working.</p>\r\n<p>I am now going to try and set up the roles and users; but at least I can now run the tool and click on the Security tab without error.</p>\r\n<p>Many thanks for your prompt answers to my queries</p>\r\n<p>&nbsp;</p>\r\n<p>Chris</p>",
    "PostedDate": "2010-08-24T13:43:24.47-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "484417",
    "ThreadId": "224542",
    "Html": "<p>Sorry for the hassle. Glad you got it working!</p>",
    "PostedDate": "2010-08-24T16:57:12.263-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "494078",
    "ThreadId": "224542",
    "Html": "<blockquote style=\"border:solid .1em #ccc;font-style:italic;margin:.25em 1em 0 1em;padding:0 .25em 0 .25em\"><strong>chriscann wrote:</strong><br>\r\n<p>I have got it working now, including running the ASP.net configuration tool.</p>\r\n<p>I removed everything from App_Data and reconnected to the databases using the Database Explorer, the connection strings are:</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;ApplicationServices&quot; connectionString=&quot;Data Source=CHRIS-PC\\sqlexpress;Initial Catalog=C:\\USERS\\CHRIS\\DOCUMENTS\\VISUAL STUDIO 2010\\PROJECTS\\MVCMUSICSTORE\\MVCMUSICSTORE\\APP_DATA\\ASPNETDB.MDF;Integrated Security=True;&quot; providerName=&quot;System.Data.SqlClient&quot; /&gt;</p>\r\n<p><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;MvcMusicStoreEntities&quot; connectionString=&quot;metadata=res://*/Models.StoreDB.csdl|res://*/Models.StoreDB.ssdl|res://*/Models.StoreDB.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;Data Source=CHRIS-PC\\sqlexpress;Initial Catalog=MvcMusicStore;Integrated Security=True;MultipleActiveResultSets=True&amp;quot;&quot; providerName=&quot;System.Data.EntityClient&quot; /&gt;</p>\r\n<p>&nbsp;</p>\r\n<p>I just created the entity model by right-clicking on Models and adding the ADO.Entity Data Model as in the tutorial; rebuilt the application and &quot;hey presto&quot; it started working.</p>\r\n<p>I am now going to try and set up the roles and users; but at least I can now run the tool and click on the Security tab without error.</p>\r\n<p>Many thanks for your prompt answers to my queries</p>\r\n<p>&nbsp;</p>\r\n<p>Chris</p>\r\n</blockquote>\r\n<p>&nbsp;Where you able to add both database instances with one ADO.Entity Data Model?&nbsp; How are you doing that?&nbsp; When I create two, one for each instance, I get all kinds of duplication errors!</p>",
    "PostedDate": "2010-09-15T13:38:30.99-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "546509",
    "ThreadId": "224542",
    "Html": "\r\n<p>Hi,&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>I am having the same problem you had? Could you please give me a hand here? How can I get the connection for &quot;ApplicationServices&quot; and how is it related to the application?</p>\r\n<p>Whenever I try to execute the application it stops here:</p>\r\n<p>&nbsp;</p>\r\n<pre>        private List GetTopSellingAlbums(int count)\r\n        {\r\n            // Group the order details by album and return\r\n            // the albums with the highest count\r\n\r\n            return storeDB.Albums\r\n                .OrderByDescending(a =&gt; a.OrderDetails.Count())\r\n                .Take(count)\r\n                .ToList();\r\n        }</pre>\r\n<p>Thank you in advance.&nbsp;</p>\r\n",
    "PostedDate": "2011-01-10T00:48:56.19-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "548326",
    "ThreadId": "224542",
    "Html": "\r\n<p>Hi Guys</p>\r\n<p>&nbsp;</p>\r\n<p>I did not create the ADO Entity model with both databases. The Application Services connection string is for the Membership database as described on page 64 of the PDF. App_Data does not work in the final released version of VS2010.</p>\r\n<p>It is a long time since I completed this exercise so I have enclosed the code for my web.config as it may help you&gt; If these clues do not solve the problem please get back to me and I will investigate further.</p>\r\n<p>&nbsp;</p>\r\n<p>Good luck</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;<br>\r\n&lt;!--<br>\r\n&nbsp; For more information on how to configure your ASP.NET application, please visit<br>\r\n&nbsp; http://go.microsoft.com/fwlink/?LinkId=152368<br>\r\n&nbsp; --&gt;<br>\r\n&lt;configuration&gt;<br>\r\n&nbsp; &lt;connectionStrings&gt;<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp; &lt;add name=&quot;ApplicationServices&quot; connectionString=&quot;Data Source=CHRIS-PC\\;Initial Catalog=C:\\USERS\\CHRIS\\DOCUMENTS\\VISUAL STUDIO 2010\\PROJECTS\\MVCMUSICSTORE\\MVCMUSICSTORE\\APP_DATA\\ASPNETDB.MDF;Integrated Security=True;&quot; providerName=&quot;System.Data.SqlClient&quot;\r\n /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;MvcMusicStoreEntities&quot; connectionString=&quot;metadata=res://*/Models.StoreDB.csdl|res://*/Models.StoreDB.ssdl|res://*/Models.StoreDB.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;Data Source=CHRIS-PC\\;Initial\r\n Catalog=MvcMusicStore;Integrated Security=True;MultipleActiveResultSets=True&amp;quot;&quot; providerName=&quot;System.Data.EntityClient&quot; /&gt;&lt;/connectionStrings&gt;<br>\r\n&nbsp; &lt;system.web&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;compilation debug=&quot;true&quot; targetFramework=&quot;4.0&quot;&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;assemblies&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add assembly=&quot;System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add assembly=&quot;System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add assembly=&quot;System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add assembly=&quot;System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/assemblies&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;/compilation&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;authentication mode=&quot;Forms&quot;&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;forms loginUrl=&quot;~/Account/LogOn&quot; timeout=&quot;2880&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;/authentication&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;membership&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;providers&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;clear /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;AspNetSqlMembershipProvider&quot; type=&quot;System.Web.Security.SqlMembershipProvider&quot; connectionStringName=&quot;ApplicationServices&quot; enablePasswordRetrieval=&quot;false&quot; enablePasswordReset=&quot;true&quot; requiresQuestionAndAnswer=&quot;false&quot;\r\n requiresUniqueEmail=&quot;false&quot; maxInvalidPasswordAttempts=&quot;5&quot; minRequiredPasswordLength=&quot;6&quot; minRequiredNonalphanumericCharacters=&quot;0&quot; passwordAttemptWindow=&quot;10&quot; applicationName=&quot;/&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/providers&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;/membership&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;profile&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;providers&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;clear /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;AspNetSqlProfileProvider&quot; type=&quot;System.Web.Profile.SqlProfileProvider&quot; connectionStringName=&quot;ApplicationServices&quot; applicationName=&quot;/&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/providers&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;/profile&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;roleManager enabled=&quot;true&quot;&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;providers&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;clear /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add connectionStringName=&quot;ApplicationServices&quot; applicationName=&quot;/&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name=&quot;AspNetSqlRoleProvider&quot; type=&quot;System.Web.Security.SqlRoleProvider&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add applicationName=&quot;/&quot; name=&quot;AspNetWindowsTokenRoleProvider&quot;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type=&quot;System.Web.Security.WindowsTokenRoleProvider&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/providers&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;/roleManager&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;pages&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;namespaces&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add namespace=&quot;System.Web.Mvc&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add namespace=&quot;System.Web.Mvc.Ajax&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add namespace=&quot;System.Web.Mvc.Html&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add namespace=&quot;System.Web.Routing&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add namespace=&quot;MvcMusicStore&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add namespace=&quot;MvcMusicStore.Models&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add namespace=&quot;MvcMusicStore.Helpers&quot;/&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/namespaces&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;/pages&gt;<br>\r\n&nbsp; &lt;/system.web&gt;<br>\r\n&nbsp; &lt;system.webServer&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;validation validateIntegratedModeConfiguration=&quot;false&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;modules runAllManagedModulesForAllRequests=&quot;true&quot; /&gt;<br>\r\n&nbsp; &lt;/system.webServer&gt;<br>\r\n&nbsp; &lt;runtime&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;assemblyBinding xmlns=&quot;urn:schemas-microsoft-com:asm.v1&quot;&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;dependentAssembly&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;assemblyIdentity name=&quot;System.Web.Mvc&quot; publicKeyToken=&quot;31bf3856ad364e35&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;bindingRedirect oldVersion=&quot;1.0.0.0&quot; newVersion=&quot;2.0.0.0&quot; /&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/dependentAssembly&gt;<br>\r\n&nbsp;&nbsp;&nbsp; &lt;/assemblyBinding&gt;<br>\r\n&nbsp; &lt;/runtime&gt;<br>\r\n&lt;/configuration&gt;</p>\r\n",
    "PostedDate": "2011-01-12T15:51:50.587-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "548733",
    "ThreadId": "224542",
    "Html": "\r\n<p>I managed to use a real database instead of the file provided. Thanks anyway for your help.</p>\r\n<p>Regards.</p>\r\n",
    "PostedDate": "2011-01-13T07:32:27.137-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]
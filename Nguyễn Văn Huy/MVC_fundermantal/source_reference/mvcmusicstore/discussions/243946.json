[
  {
    "Id": "557900",
    "ThreadId": "243946",
    "Html": "\r\n<p>I get the following error when trying to add an album to the cart in the VB version I'm converting.<br>\r\nI'm using SQL Server in this version.<br>\r\nThe error occurs at the HTML.ActionLink.<br>\r\nObject reference not set to an instance of an object.</p>\r\n<p>@For Each item In Model.CartItems <br>\r\n&nbsp;@&lt;tr id=&quot;row-@item.RecordId&quot;&gt; <br>\r\n&nbsp;&lt;td&gt;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @Html.ActionLink(item.Album.Title,&quot;Details&quot;, &quot;Store&quot;, New With {.id = item.AlbumId}, Nothing )\r\n<br>\r\n&nbsp;&lt;/td&gt; <br>\r\n&nbsp;&lt;td&gt; <br>\r\n@item.Album.Price</p>\r\n<p>When I try to check the completed C# solution I get the following error at the SaveChanges point. The completed solution is using the file DB<br>\r\n{&quot;Cannot insert the value NULL into column 'RecordId', table 'MvcMusicStores.dbo.Carts'; column does not allow nulls. INSERT fails.\\r\\nThe statement has been terminated.&quot;}</p>\r\n<p>public void AddToCart(Album album)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Get the matching cart and album instances<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var cartItem = storeDB.Carts.SingleOrDefault(c =&gt; c.CartId == ShoppingCartId &amp;&amp; c.AlbumId == album.AlbumId);</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (cartItem == null)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Create a new cart item if no cart item exists<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cartItem = new Cart<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AlbumId = album.AlbumId,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CartId = ShoppingCartId,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Count = 1,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DateCreated = DateTime.Now<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; storeDB.Carts.Add(cartItem);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // If the item does exist in the cart, then add one to the quantity<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cartItem.Count&#43;&#43;;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Save changes<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; storeDB.SaveChanges();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>\r\n",
    "PostedDate": "2011-01-31T00:35:16.61-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "558326",
    "ThreadId": "243946",
    "Html": "\r\n<p>Both of these were the result of typos</p>\r\n<p>The first I had a property of Albums instead of Album in the Genre Class.</p>\r\n<p>The second I had forgot to put the original db file back in place from when I had an earlier issue with the PluralizingTableNameConvention, and was still referencing the other file in web.config.</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2011-01-31T14:08:17.467-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "558374",
    "ThreadId": "243946",
    "Html": "\r\n<p>Glad you got it sorted out. That's the tradeoff of using convention-based systems like EF Code-First - if you mistype something, it won't work and it's hard to know exactly why.</p>\r\n",
    "PostedDate": "2011-01-31T16:28:34.877-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]